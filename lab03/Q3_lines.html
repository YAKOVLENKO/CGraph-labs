<html>
	<body>
		<canvas height='320' width='480' id='lab03'></canvas>
	
		<script>
			var canvas = document.getElementById("lab03");
			var ctx = canvas.getContext("2d");
			
			var x1 = Number.NaN;
			var x2 = Number.NaN;
			var y1 = Number.NaN;
			var y2 = Number.NaN;
			
			var new_line = true;
			
			function draw_line(x_1, x_2, y_1, y_2)
			{
				var error = 0.0;
				var coefficient = Math.abs((y_2 - y_1)/(x_2 - x_1));
				
				var x_sign = 0;
				var y_sign = 0;
				
				if (y_2 >= y1)
				{
					y_sign = 1;
				}
				else
				{
					y_sign = -1;
				}
				
				if (x_2 >= x_1)
				{
					x_sign = 1;
				}				
				else
				{
					x_sign = -1
				}
				
				var x_flag = true;
				var y_flag = false;
				if (coefficient > 1)
				{
					coefficient = Math.abs((x_2 - x_1)/(y_2 - y_1));
					x_flag = false;
					y_flag = true;
				}				
				
				while ((x_1 - 10 != x_2 - 10) && (y_1 - 10!= y_2 - 10))
				{
					if (error < 0.5) 
					{
						ctx.fillRect(x_1 + x_sign * x_flag - 10, y_1 + y_sign * y_flag - 10, 1, 1);
						ctx.fillStyle = '#000000';
						x_1 += x_sign * x_flag;
						y_1 += y_sign * y_flag;
						
					}
					else 
					{
						ctx.fillRect(x_1 + x_sign - 10, y_1 + y_sign - 10, 1, 1);
						ctx.fillStyle = '#FF0000';
						error -= 1.0;
						x_1 += x_sign;
						y_1 += y_sign;
					}
					error += coefficient;
				}
				
			
			}
			
			function onClick(event)
			{
				if (new_line == true) 
				{
					x1 = event.clientX;
					y1 = event.clientY;
					
					new_line = false;
				}
				else
					{
						x2 = event.clientX;
						y2 = event.clientY;
						
						new_line = true;
					}
				if (new_line == true)
				{
					draw_line(x1, x2, y1, y2);
				}
					
			}
			
			
			canvas.addEventListener('click', onClick);
			
		</script>
	
	</body>
</html>
